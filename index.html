<!DOCTYPE html>

<html lang="ku" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ğŸ•Œ Hajiawa Ultra Supreme | Ù†Û•Ø®Ø´Û•ÛŒ Ø²ÛŒØ±Û•Ú©ÛŒ Ù¾ÛØ´Ú©Û•ÙˆØªÙˆÙˆ</title>

<meta name="theme-color" content="#020617">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="description" content="Ø³ÛŒØ³ØªÛ•Ù…ÛŒ Ø²ÛŒØ±Û•Ú©ÛŒ Ù†Û•Ø®Ø´Û•Ø³Ø§Ø²ÛŒ Ø­Ø§Ø¬ÛŒØ§ÙˆØ§ - Ultra Supreme Edition">

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>

<!-- Core Libraries -->
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.css" />
<script src="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.js"></script>

<!-- Prayer Times Library -->
<script src="https://cdn.jsdelivr.net/npm/adhan@4.4.4/PostDist/adhan.min.js"></script>

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">

<script>
    tailwind.config = {
        theme: {
            extend: {
                colors: {
                    ultra: { 
                        dark: '#020617', 
                        darker: '#0f172a',
                        card: 'rgba(15, 23, 42, 0.85)', 
                        accent: '#3b82f6',
                        gold: '#fbbf24'
                    }
                },
                fontFamily: { 
                    sans: ['Vazirmatn', 'sans-serif'] 
                }
            }
        }
    }
</script>

<style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body, html { 
        height: 100%; margin: 0; padding: 0; background: #020617; overflow: hidden; 
        font-family: 'Vazirmatn', sans-serif;
        -webkit-font-smoothing: antialiased;
    }

    .bg-animated {
        position: fixed; inset: 0;
        background: 
            radial-gradient(circle at 20% 30%, rgba(59, 130, 246, 0.15) 0%, transparent 50%),
            radial-gradient(circle at 80% 70%, rgba(168, 85, 247, 0.1) 0%, transparent 50%);
        animation: pulse-bg 8s ease-in-out infinite;
        pointer-events: none; z-index: 0;
    }
    @keyframes pulse-bg { 
        0%, 100% { opacity: 0.4; } 
        50% { opacity: 0.7; } 
    }

    #map { position: fixed; top: 0; left: 0; right: 0; bottom: 0; z-index: 1; }
    .leaflet-control-attribution, .leaflet-control-zoom, .leaflet-routing-container { display: none !important; }

    .glass {
        background: rgba(15, 23, 42, 0.88);
        backdrop-filter: blur(24px) saturate(180%);
        border: 1.5px solid rgba(255, 255, 255, 0.15);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4), 0 0 60px rgba(59, 130, 246, 0.1);
    }

    .glass-light {
        background: rgba(255, 255, 255, 0.08);
        backdrop-filter: blur(12px);
        border: 1px solid rgba(255, 255, 255, 0.12);
    }

    .marker-funeral {
        width: 52px; height: 52px;
        background: linear-gradient(135deg, #ef4444, #dc2626);
        border: 4px solid white; border-radius: 50% 50% 50% 0;
        transform: rotate(-45deg);
        display: flex; align-items: center; justify-content: center;
        color: white;
        box-shadow: 0 6px 24px rgba(239, 68, 68, 0.6);
        animation: marker-bounce 2s infinite ease-in-out;
        position: relative; cursor: pointer;
    }

    .marker-funeral::before {
        content: ''; position: absolute; inset: -12px;
        border: 3px solid rgba(239, 68, 68, 0.3);
        border-radius: 50% 50% 50% 0;
        animation: ping 2s cubic-bezier(0, 0, 0.2, 1) infinite;
    }

    .marker-funeral i {
        transform: rotate(45deg); font-size: 22px;
    }

    .marker-mosque {
        width: 40px; height: 40px;
        background: linear-gradient(135deg, #fbbf24, #f59e0b);
        border: 3px solid white; border-radius: 50%;
        display: flex; align-items: center; justify-content: center;
        color: white;
        box-shadow: 0 4px 16px rgba(251, 191, 36, 0.5);
        transition: all 0.3s; cursor: pointer;
    }

    .marker-mosque:hover { transform: scale(1.2); }
    .marker-mosque i { font-size: 18px; }

    @keyframes marker-bounce {
        0%, 100% { transform: translateY(0) rotate(-45deg); }
        50% { transform: translateY(-18px) rotate(-45deg); }
    }

    @keyframes ping {
        0% { transform: scale(1); opacity: 1; }
        75%, 100% { transform: scale(1.8); opacity: 0; }
    }

    .user-marker {
        width: 20px; height: 20px;
        background: linear-gradient(135deg, #3b82f6, #2563eb);
        border: 4px solid white; border-radius: 50%;
        box-shadow: 0 0 30px rgba(59, 130, 246, 0.8);
        animation: pulse-glow 2s ease-in-out infinite;
    }

    @keyframes pulse-glow {
        0%, 100% { box-shadow: 0 0 30px rgba(59, 130, 246, 0.8); }
        50% { box-shadow: 0 0 50px rgba(59, 130, 246, 1); }
    }

    .loader-supreme {
        width: 50px; height: 50px;
        border: 4px solid rgba(59, 130, 246, 0.2);
        border-top-color: #3b82f6;
        border-radius: 50%;
        animation: spin 0.8s linear infinite;
    }

    @keyframes spin { to { transform: rotate(360deg); } }

    .modal-container {
        position: fixed; inset: 0;
        background: rgba(0, 0, 0, 0.92);
        backdrop-filter: blur(8px);
        z-index: 7000; display: none;
        align-items: center; justify-content: center;
        padding: 20px;
    }

    .toast-container {
        position: fixed; top: 24px; left: 50%;
        transform: translateX(-50%) translateY(-120px);
        z-index: 8000;
        transition: transform 0.4s;
    }

    .toast-container.show {
        transform: translateX(-50%) translateY(0);
    }

    ::-webkit-scrollbar { width: 8px; }
    ::-webkit-scrollbar-track { background: rgba(255, 255, 255, 0.05); border-radius: 10px; }
    ::-webkit-scrollbar-thumb { background: linear-gradient(180deg, #3b82f6, #2563eb); border-radius: 10px; }

    input:focus, select:focus { outline: none; border-color: rgba(59, 130, 246, 0.6) !important; }

    .prayer-next {
        background: linear-gradient(135deg, rgba(59, 130, 246, 0.3), rgba(139, 92, 246, 0.2)) !important;
        border: 2px solid rgba(59, 130, 246, 0.5) !important;
        box-shadow: 0 0 24px rgba(59, 130, 246, 0.4) !important;
    }

    @keyframes float {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-10px); }
    }

    @keyframes shimmer {
        0% { background-position: -200% 0; }
        100% { background-position: 200% 0; }
    }
    
    .admin-btn-pulse {
        animation: admin-pulse 2s infinite;
    }
    
    @keyframes admin-pulse {
        0%, 100% { box-shadow: 0 0 0 0 rgba(251, 191, 36, 0.7); }
        50% { box-shadow: 0 0 0 10px rgba(251, 191, 36, 0); }
    }
</style>

</head>

<body class="text-white">

<div class="bg-animated"></div>

<!-- Splash Screen -->
<div id="splashScreen" class="fixed inset-0 z-[9999] bg-gradient-to-br from-ultra-dark via-ultra-darker to-purple-950 flex flex-col items-center justify-center transition-opacity duration-700">
    <div class="relative mb-8" style="animation: float 3s ease-in-out infinite;">
        <div class="absolute inset-0 bg-gradient-to-r from-blue-500 to-purple-500 rounded-[32px] blur-3xl opacity-40"></div>
        <div class="relative w-32 h-32 rounded-[32px] bg-gradient-to-br from-blue-500 via-purple-500 to-blue-600 flex items-center justify-center shadow-2xl">
            <i class="fas fa-kaaba text-6xl text-white"></i>
        </div>
    </div>
    
    <h1 class="text-5xl font-black tracking-[0.25em] mb-3 text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-purple-400 to-blue-400">
        HAJIAWA
    </h1>
    
    <div class="flex items-center gap-3 mb-2">
        <div class="h-[2px] w-12 bg-gradient-to-r from-transparent via-blue-500 to-transparent"></div>
        <p class="text-blue-400 text-sm font-bold tracking-[0.3em]">ULTRA SUPREME</p>
        <div class="h-[2px] w-12 bg-gradient-to-r from-transparent via-purple-500 to-transparent"></div>
    </div>
    
    <p class="text-gray-500 text-xs font-mono mb-10">Ù†Û•Ø®Ø´Û•ÛŒ Ø²ÛŒØ±Û•Ú©ÛŒ Ù¾ÛØ´Ú©Û•ÙˆØªÙˆÙˆ v7.0</p>
    
    <div class="loader-supreme mb-6"></div>
    
    <p id="loadStatus" class="text-gray-400 text-sm font-medium">Ø¬Ø§Ø±Ú©Ø±Ø¯Ù†ÛŒ Ø³ÛŒØ³ØªÛ•Ù…...</p>
</div>

<div id="map"></div>

<!-- Top Header -->
<div class="fixed top-0 inset-x-0 z-[5000] p-4 bg-gradient-to-b from-black/90 via-black/60 to-transparent pointer-events-none">
    <!-- Ú•ÛŒØ²ÛÚ©ÛŒ ÛŒÛ•Ú©Û•Ù… Ø¨Û† Ù†Ø§Ùˆ Ùˆ Ú¯Û•Ú•Ø§Ù† -->
    <div class="flex items-center justify-between pointer-events-auto max-w-2xl mx-auto gap-3 mb-2">
        <div class="glass rounded-2xl px-4 py-2 flex items-center gap-3 shadow-2xl">
            <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center shadow-lg">
                <i class="fas fa-kaaba text-white text-lg"></i>
            </div>
            <div class="hidden sm:block">
                <h1 class="text-sm font-black tracking-tight">HAJIAWA</h1>
                <p class="text-[10px] text-gray-400">Ultra Supreme</p>
            </div>
        </div>

        <div class="flex-1 glass rounded-2xl p-3 flex items-center gap-3 shadow-xl max-w-md">
            <i class="fas fa-search text-blue-400 text-sm"></i>
            <input id="searchInput" type="text" oninput="handleSearch()" placeholder="Ú¯Û•Ú•Ø§Ù† Ø¨Û† Ù…Ø²Ú¯Û•ÙˆØª ÛŒØ§Ù† Ù¾Ø±Ø³Û•..." class="bg-transparent border-none outline-none w-full text-sm text-white placeholder-gray-500">
            <button onclick="clearSearch()" class="w-7 h-7 rounded-lg bg-white/5 hover:bg-white/10 flex items-center justify-center transition">
                <i class="fas fa-times text-gray-400 text-xs"></i>
            </button>
        </div>
    </div>
    
    <!-- Ú•ÛŒØ²ÛÚ©ÛŒ Ø¯ÙˆÙˆÛ•Ù… Ø¨Û† Ø¯ÙˆÚ¯Ù…Û•Ú©Ø§Ù† -->
    <div class="flex items-center justify-between pointer-events-auto max-w-2xl mx-auto gap-2">
        <div class="flex items-center gap-2">
            <button onclick="showAllMosques()" class="w-11 h-11 glass rounded-xl flex items-center justify-center hover:bg-white/10 transition active:scale-95" title="Ù‡Û•Ù…ÙˆÙˆ Ù…Ø²Ú¯Û•ÙˆØªÛ•Ú©Ø§Ù†">
                <i class="fas fa-expand-alt text-green-400"></i>
            </button>
            <button onclick="toggleModal('statsModal')" class="w-11 h-11 glass rounded-xl flex items-center justify-center hover:bg-white/10 transition active:scale-95 relative" title="Ø¦Ø§Ù…Ø§Ø±">
                <i class="fas fa-chart-line text-purple-400"></i>
                <span id="statsNotif" class="absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full text-[10px] font-bold flex items-center justify-center border-2 border-ultra-dark hidden">!</span>
            </button>
            <button onclick="toggleModal('prayerModal')" class="w-11 h-11 glass rounded-xl flex items-center justify-center hover:bg-white/10 transition active:scale-95 relative" title="Ú©Ø§ØªÛŒ Ù†ÙˆÛÚ˜">
                <i class="fas fa-clock text-blue-400"></i>
                <span id="prayerNotif" class="absolute -top-1 -right-1 w-5 h-5 bg-green-500 rounded-full text-[10px] font-bold flex items-center justify-center border-2 border-ultra-dark hidden">1</span>
            </button>
            <button onclick="toggleMapStyleMenu()" class="w-11 h-11 glass rounded-xl flex items-center justify-center hover:bg-white/10 transition active:scale-95" title="Ø¬Û†Ø±ÛŒ Ù†Û•Ø®Ø´Û•">
                <i class="fas fa-map text-orange-400"></i>
            </button>
            <button onclick="toggleModal('adminModal')" class="w-11 h-11 glass rounded-xl flex items-center justify-center hover:bg-white/10 transition active:scale-95 admin-btn-pulse" title="Ø¦Û•Ø¯Ù…ÛŒÙ†">
                <i class="fas fa-shield-alt text-yellow-400"></i>
            </button>
        </div>
        
        <div id="funeralBadge" class="hidden glass rounded-2xl px-4 py-2 flex items-center gap-3 border border-red-500/30 shadow-xl">
            <div class="w-3 h-3 rounded-full bg-red-500 animate-ping absolute"></div>
            <div class="w-3 h-3 rounded-full bg-red-500"></div>
            <span id="funeralCount" class="text-sm font-bold text-red-200">0 Ù¾Ø±Ø³Û•</span>
            <i class="fas fa-hands-praying text-red-400"></i>
        </div>
    </div>
</div>

<!-- Map Style Menu -->
<div id="mapStyleMenu" class="fixed top-20 right-4 z-[6000] glass p-3 rounded-2xl shadow-2xl hidden">
    <div class="grid grid-cols-2 gap-2">
        <button onclick="changeMapStyle('dark')" class="p-3 rounded-xl bg-gray-800 hover:bg-gray-700 transition flex flex-col items-center gap-1">
            <i class="fas fa-moon text-white text-xl"></i>
            <span class="text-xs">ØªØ§Ø±ÛŒÚ©</span>
        </button>
        <button onclick="changeMapStyle('satellite')" class="p-3 rounded-xl bg-blue-700 hover:bg-blue-600 transition flex flex-col items-center gap-1">
            <i class="fas fa-satellite text-white text-xl"></i>
            <span class="text-xs">Ø³Û•ØªÛ•Ù„Ø§ÛŒØª</span>
        </button>
        <button onclick="changeMapStyle('street')" class="p-3 rounded-xl bg-green-700 hover:bg-green-600 transition flex flex-col items-center gap-1">
            <i class="fas fa-road text-white text-xl"></i>
            <span class="text-xs">Ø´Û•Ù‚Ø§Ù…</span>
        </button>
        <button onclick="changeMapStyle('terrain')" class="p-3 rounded-xl bg-yellow-700 hover:bg-yellow-600 transition flex flex-col items-center gap-1">
            <i class="fas fa-mountain text-white text-xl"></i>
            <span class="text-xs">ØªÛŒØ±ÛÙ†</span>
        </button>
    </div>
</div>

<!-- Bottom Actions -->
<div class="fixed bottom-6 left-1/2 -translate-x-1/2 z-[5000] pointer-events-none">
    <div class="glass p-2.5 rounded-[28px] flex items-center gap-2 pointer-events-auto shadow-2xl">
        <button onclick="locateUser()" class="w-14 h-14 rounded-[20px] bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center text-xl text-white shadow-lg transition active:scale-90">
            <i class="fas fa-location-crosshairs"></i>
        </button>
        <div class="w-[2px] h-8 bg-white/10"></div>
        <button onclick="toggleModal('janazaModal')" class="w-14 h-14 rounded-[20px] glass-light hover:bg-white/15 flex items-center justify-center text-xl text-green-400 transition active:scale-90">
            <i class="fas fa-book-quran"></i>
        </button>
        <button onclick="shareApp()" class="w-14 h-14 rounded-[20px] glass-light hover:bg-white/15 flex items-center justify-center text-xl text-yellow-400 transition active:scale-90">
            <i class="fas fa-share-nodes"></i>
        </button>
    </div>
</div>

<!-- Detail Card -->
<div id="detailCard" class="fixed bottom-0 inset-x-0 z-[6000] glass rounded-t-[32px] p-6 transform translate-y-full transition-all duration-500 max-h-[70vh] overflow-y-auto">
    <div class="w-20 h-1.5 bg-white/20 rounded-full mx-auto mb-6"></div>
    
    <button onclick="closeCard()" class="absolute top-6 left-6 w-10 h-10 rounded-xl glass-light flex items-center justify-center hover:bg-white/20 transition">
        <i class="fas fa-times text-gray-400"></i>
    </button>

    <div class="flex flex-col items-center mb-6">
        <div class="relative mb-4">
            <div class="absolute inset-0 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full blur-xl opacity-40"></div>
            <div id="cardIcon" class="relative w-20 h-20 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full border-4 border-ultra-dark flex items-center justify-center shadow-2xl">
                <i class="fas fa-mosque text-3xl text-white"></i>
            </div>
        </div>
        
        <h2 id="cardTitle" class="text-2xl font-black mb-2 text-center">...</h2>
        <span id="cardDistance" class="hidden px-3 py-1 bg-blue-500/20 border border-blue-500/40 rounded-lg text-blue-300 text-sm font-bold">
            <i class="fas fa-route ml-1"></i>
            <span id="cardDistText">0.0 km</span>
        </span>
    </div>

    <div id="cardDetails" class="glass-light p-4 rounded-2xl mb-4 hidden">
        <h3 class="font-bold text-sm mb-2 text-blue-400"><i class="fas fa-info-circle ml-1"></i>Ø²Ø§Ù†ÛŒØ§Ø±ÛŒ</h3>
        <p id="cardDescription" class="text-sm text-gray-300"></p>
    </div>

    <div id="cardFuneralAlert" class="hidden glass-light p-5 rounded-2xl mb-6 border-r-4 border-red-500">
        <div class="flex items-start gap-4">
            <div class="w-12 h-12 bg-red-600 rounded-xl flex items-center justify-center">
                <i class="fas fa-hands-praying text-white text-xl"></i>
            </div>
            <div>
                <h3 class="font-bold text-red-200 text-sm mb-1"><i class="fas fa-exclamation-circle ml-1"></i>Ø¦Ø§Ú¯Ø§Ø¯Ø§Ø±ÛŒ Ù¾Ø±Ø³Û•</h3>
                <p id="cardDeadName" class="text-white font-bold">...</p>
                <p id="cardPrayerTime" class="text-gray-400 text-sm"><i class="fas fa-clock ml-1"></i>...</p>
            </div>
        </div>
    </div>

    <div class="grid grid-cols-2 gap-3">
        <button onclick="startNavigation()" class="bg-gradient-to-r from-blue-600 to-blue-500 py-4 rounded-2xl font-bold flex items-center justify-center gap-2 shadow-lg">
            <i class="fas fa-location-arrow"></i>Ú•ÛÚ¯Ø§
        </button>
        <button onclick="shareLocation()" class="glass-light py-4 rounded-2xl font-bold flex items-center justify-center gap-2">
            <i class="fas fa-share-nodes"></i>Ù‡Ø§ÙˆØ¨Û•Ø´
        </button>
    </div>
</div>

<!-- Stats Modal -->
<div id="statsModal" class="modal-container" onclick="if(event.target==this) toggleModal('statsModal')">
    <div class="glass w-full max-w-lg rounded-[32px] p-6 shadow-2xl max-h-[85vh] overflow-y-auto">
        <div class="flex items-center justify-between mb-6">
            <h2 class="text-2xl font-black">Ø¦Ø§Ù…Ø§Ø±</h2>
            <button onclick="toggleModal('statsModal')" class="w-10 h-10 rounded-xl glass-light flex items-center justify-center">
                <i class="fas fa-times text-gray-400"></i>
            </button>
        </div>
        <div class="grid grid-cols-2 gap-4 mb-6">
            <div class="glass-light p-4 rounded-2xl">
                <i class="fas fa-mosque text-4xl text-yellow-400 mb-2"></i>
                <p class="text-3xl font-black" id="totalMosques">0</p>
                <p class="text-xs text-gray-400">Ú©Û†ÛŒ Ù…Ø²Ú¯Û•ÙˆØª</p>
            </div>
            <div class="glass-light p-4 rounded-2xl">
                <i class="fas fa-hands-praying text-4xl text-red-400 mb-2"></i>
                <p class="text-3xl font-black" id="activeFunerals">0</p>
                <p class="text-xs text-gray-400">Ù¾Ø±Ø³Û• Ú†Ø§Ù„Ø§Ú©</p>
            </div>
            <div class="glass-light p-4 rounded-2xl">
                <i class="fas fa-users text-4xl text-blue-400 mb-2"></i>
                <p class="text-3xl font-black">324</p>
                <p class="text-xs text-gray-400">Ø³Û•Ø±Ø¯Ø§Ù†</p>
            </div>
            <div class="glass-light p-4 rounded-2xl">
                <i class="fas fa-map-marked-alt text-4xl text-green-400 mb-2"></i>
                <p class="text-3xl font-black" id="nearbyCount">0</p>
                <p class="text-xs text-gray-400">Ù…Ø²Ú¯Û•ÙˆØªÛŒ Ù†Ø²ÛŒÚ©</p>
            </div>
        </div>
        <div class="glass-light p-5 rounded-2xl">
            <h3 class="font-bold text-sm mb-4 text-blue-400"><i class="fas fa-list-ul ml-1"></i>Ù¾Ø±Ø³Û•Ú©Ø§Ù†ÛŒ Ø¦Û•Ù…Ú•Û†</h3>
            <div id="todayFuneralsList" class="space-y-2"></div>
        </div>
    </div>
</div>

<!-- Prayer Modal -->
<div id="prayerModal" class="modal-container" onclick="if(event.target==this) toggleModal('prayerModal')">
    <div class="glass w-full max-w-md rounded-[32px] p-8 shadow-2xl text-center">
        <div class="w-20 h-20 mx-auto mb-6 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center shadow-2xl">
            <i class="fas fa-clock text-3xl text-white"></i>
        </div>
        <h2 class="text-2xl font-black mb-4">Ú©Ø§ØªÛŒ Ù†ÙˆÛÚ˜</h2>
        <div id="currentTime" class="mb-6">
            <div class="text-lg font-mono font-bold">--:--:--</div>
            <div class="text-xs text-gray-400 mt-1">Ø¨Ø§Ø±Ú©Ø±Ø¯Ù†...</div>
        </div>
        <div id="prayerList" class="space-y-3"></div>
        <button onclick="toggleModal('prayerModal')" class="mt-8 text-gray-500 text-sm">Ø¯Ø§Ø®Ø³ØªÙ†</button>
    </div>
</div>

<!-- Janaza Modal -->
<div id="janazaModal" class="modal-container" onclick="if(event.target==this) toggleModal('janazaModal')">
    <div class="glass w-full max-w-lg rounded-[32px] p-6 shadow-2xl max-h-[85vh] overflow-y-auto">
        <div class="flex items-center justify-between mb-6">
            <h2 class="text-2xl font-black flex items-center gap-2">
                <i class="fas fa-book-quran text-green-400"></i>Ù†ÙˆÛÚ˜ÛŒ Ø¬Û•Ù†Ø§Ø²Û•
            </h2>
            <button onclick="toggleModal('janazaModal')" class="w-10 h-10 rounded-xl glass-light flex items-center justify-center">
                <i class="fas fa-times text-gray-400"></i>
            </button>
        </div>
        
        <div class="space-y-4 text-sm">
            <div class="glass-light p-5 rounded-2xl border-r-4 border-blue-500">
                <div class="flex items-center gap-3 mb-3">
                    <div class="w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center shadow-lg">
                        <span class="font-black text-white">Ù¡</span>
                    </div>
                    <h3 class="font-bold text-blue-400">ØªÛ•Ú©Ø¨ÛŒØ±ÛŒ ÛŒÛ•Ú©Û•Ù…</h3>
                    <span class="text-xs text-gray-400 mr-auto">Ø§Ù„Ù„Ù‡ Ø£ÙÙƒÙ’Ø¨ÙØ±</span>
                </div>
                <p class="text-gray-300 mb-2 mr-13">Ø®ÙˆÛÙ†Ø¯Ù†ÛŒ Ø³ÙˆØ±Û•ØªÛŒ Ø§Ù„ÙØ§ØªØ­Ø© ÙˆÛ•Ú©Ùˆ Ù†ÙˆÛÚ˜ÛŒ Ø¦Ø§Ø¯Û•:</p>
                <p class="italic text-blue-200 text-[13px] leading-loose mr-13 text-justify" style="line-height: 2;">
                    ï´¿Ø¨ÙØ³Û¡Ù…Ù Ù±Ù„Ù„ÙÙ‘Ù‡Ù Ù±Ù„Ø±ÙÙ‘Ø­Û¡Ù…ÙÙ€Ù°Ù†Ù Ù±Ù„Ø±ÙÙ‘Ø­ÙÛŒÙ…Ù ï´¿Ù¡ï´¾ Ù±Ù„Û¡Ø­ÙÙ…Û¡Ø¯Ù Ù„ÙÙ„ÙÙ‘Ù‡Ù Ø±ÙØ¨ÙÙ‘ Ù±Ù„Û¡Ø¹ÙÙ€Ù°Ù„ÙÙ…ÙÛŒÙ†Ù ï´¿Ù¢ï´¾ Ù±Ù„Ø±ÙÙ‘Ø­Û¡Ù…ÙÙ€Ù°Ù†Ù Ù±Ù„Ø±ÙÙ‘Ø­ÙÛŒÙ…Ù ï´¿Ù£ï´¾ Ù…ÙÙ€Ù°Ù„ÙÙƒÙ ÛŒÙÙˆÛ¡Ù…Ù Ù±Ù„Ø¯ÙÙ‘ÛŒÙ†Ù ï´¿Ù¤ï´¾ Ø¥ÙÛŒÙÙ‘Ø§ÙƒÙ Ù†ÙØ¹Û¡Ø¨ÙØ¯Ù ÙˆÙØ¥ÙÛŒÙÙ‘Ø§ÙƒÙ Ù†ÙØ³Û¡ØªÙØ¹ÙÛŒÙ†Ù ï´¿Ù¥ï´¾ Ù±Ù‡Û¡Ø¯ÙÙ†ÙØ§ Ù±Ù„ØµÙÙ‘Ø±Ùâ€ŠÙ°â Ø·Ù Ù±Ù„Û¡Ù…ÙØ³Û¡ØªÙÙ‚ÙÛŒÙ…Ù ï´¿Ù¦ï´¾ ØµÙØ±Ùâ€ŠÙ°â Ø·Ù Ù±Ù„ÙÙ‘Ø°ÙÛŒÙ†Ù Ø£ÙÙ†Û¡Ø¹ÙÙ…Û¡ØªÙ Ø¹ÙÙ„ÙÛŒÛ¡Ù‡ÙÙ…Û¡ ØºÙÛŒÛ¡Ø±Ù Ù±Ù„Û¡Ù…ÙØºÛ¡Ø¶ÙÙˆØ¨Ù Ø¹ÙÙ„ÙÛŒÛ¡Ù‡ÙÙ…Û¡ ÙˆÙÙ„ÙØ§ Ù±Ù„Ø¶ÙÙ‘Ø§Û¤Ù„ÙÙ‘ÛŒÙ†Ù ï´¿Ù§ï´¾ï´¾
                </p>
                <div class="mt-3 p-3 bg-blue-900/20 rounded-lg">
                    <p class="text-xs text-blue-300"><i class="fas fa-info-circle ml-1"></i>Ù¾ÛØ´ ØªÛ•Ú©Ø¨ÛŒØ± Ø¯Û•ÚµÛÛŒØª: "Ø§Ù„Ù„Ù‡ Ø£ÙÙƒÙ’Ø¨ÙØ±" Ùˆ Ø¦ÛŒÙ†Ø¬Ø§ Ø¦Û•Ù… Ø³ÙˆØ±Û•ØªÛ• Ø¯Û•Ø®ÙˆÛÙ†ÛŒØª.</p>
                </div>
            </div>

            <div class="glass-light p-5 rounded-2xl border-r-4 border-blue-500">
                <div class="flex items-center gap-3 mb-3">
                    <div class="w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center shadow-lg">
                        <span class="font-black text-white">Ù¢</span>
                    </div>
                    <h3 class="font-bold text-blue-400">ØªÛ•Ú©Ø¨ÛŒØ±ÛŒ Ø¯ÙˆÙˆÛ•Ù…</h3>
                    <span class="text-xs text-gray-400 mr-auto">Ø§Ù„Ù„Ù‡ Ø£ÙÙƒÙ’Ø¨ÙØ±</span>
                </div>
                <p class="text-gray-300 mb-2 mr-13">Ø®ÙˆÛÙ†Ø¯Ù†ÛŒ Ø³Û•ÚµØ§ÙˆØ§ØªÛŒ Ø¦ÛŒØ¨Ø±Ø§Ù‡ÛŒÙ…ÛŒ (Ø¯Ø±ÙˆØ³ØªÛŒ Ø¨Û•Ø³Û•Ø± Ù…Ø­Ù…Ø¯ ï·º):</p>
                <p class="italic text-blue-200 text-[13px] leading-loose mr-13 text-justify" style="line-height: 2;">
                    Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ ØµÙÙ„ÙÙ‘ Ø¹ÙÙ„ÙÙ‰ Ù…ÙØ­ÙÙ…ÙÙ‘Ø¯Ù ÙˆÙØ¹ÙÙ„ÙÙ‰ Ø¢Ù„Ù Ù…ÙØ­ÙÙ…ÙÙ‘Ø¯ÙØŒ ÙƒÙÙ…ÙØ§ ØµÙÙ„ÙÙ‘ÙŠÙ’ØªÙ Ø¹ÙÙ„ÙÙ‰ Ø¥ÙØ¨Ù’Ø±ÙØ§Ù‡ÙÙŠÙ…Ù ÙˆÙØ¹ÙÙ„ÙÙ‰ Ø¢Ù„Ù Ø¥ÙØ¨Ù’Ø±ÙØ§Ù‡ÙÙŠÙ…ÙØŒ Ø¥ÙÙ†ÙÙ‘ÙƒÙ Ø­ÙÙ…ÙÙŠØ¯ÙŒ Ù…ÙØ¬ÙÙŠØ¯ÙŒ<br>
                    Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ø¨ÙØ§Ø±ÙÙƒÙ’ Ø¹ÙÙ„ÙÙ‰ Ù…ÙØ­ÙÙ…ÙÙ‘Ø¯Ù ÙˆÙØ¹ÙÙ„ÙÙ‰ Ø¢Ù„Ù Ù…ÙØ­ÙÙ…ÙÙ‘Ø¯ÙØŒ ÙƒÙÙ…ÙØ§ Ø¨ÙØ§Ø±ÙÙƒÙ’ØªÙ Ø¹ÙÙ„ÙÙ‰ Ø¥ÙØ¨Ù’Ø±ÙØ§Ù‡ÙÙŠÙ…Ù ÙˆÙØ¹ÙÙ„ÙÙ‰ Ø¢Ù„Ù Ø¥ÙØ¨Ù’Ø±ÙØ§Ù‡ÙÙŠÙ…ÙØŒ Ø¥ÙÙ†ÙÙ‘ÙƒÙ Ø­ÙÙ…ÙÙŠØ¯ÙŒ Ù…ÙØ¬ÙÙŠØ¯ÙŒ
                </p>
                <div class="mt-3 p-3 bg-blue-900/20 rounded-lg">
                    <p class="text-xs text-blue-300"><i class="fas fa-info-circle ml-1"></i>Ù¾ÛØ´ ØªÛ•Ú©Ø¨ÛŒØ±ÛŒ Ø¯ÙˆÙˆÛ•Ù…: "Ø§Ù„Ù„Ù‡ Ø£ÙÙƒÙ’Ø¨ÙØ±" Ùˆ Ø¦ÛŒÙ†Ø¬Ø§ Ø¦Û•Ù… Ø³Û•ÚµØ§ÙˆØ§ØªÛ• Ø¯Û•Ø®ÙˆÛÙ†ÛŒØª.</p>
                </div>
            </div>

            <div class="glass-light p-5 rounded-2xl border-r-4 border-green-500">
                <div class="flex items-center gap-3 mb-3">
                    <div class="w-10 h-10 rounded-full bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center shadow-lg">
                        <span class="font-black text-white">Ù£</span>
                    </div>
                    <h3 class="font-bold text-green-400">ØªÛ•Ú©Ø¨ÛŒØ±ÛŒ Ø³ÛÛŒÛ•Ù…</h3>
                    <span class="text-xs text-gray-400 mr-auto">Ø§Ù„Ù„Ù‡ Ø£ÙÙƒÙ’Ø¨ÙØ±</span>
                </div>
                <p class="text-gray-300 mb-2 mr-13">Ø¯ÙˆØ¹Ø§ÛŒ Ù…Ø±Ø¯ÙˆÙˆ (Ø¨Û† Ù¾ÛŒØ§Ùˆ):</p>
                <p class="italic text-green-200 text-[13px] leading-loose mr-13 text-justify" style="line-height: 2;">
                    Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ø§ØºÙ’ÙÙØ±Ù’ Ù„ÙÙ‡Ù ÙˆÙØ§Ø±Ù’Ø­ÙÙ…Ù’Ù‡ÙØŒ ÙˆÙØ¹ÙØ§ÙÙÙ‡Ù ÙˆÙØ§Ø¹Ù’ÙÙ Ø¹ÙÙ†Ù’Ù‡ÙØŒ ÙˆÙØ£ÙÙƒÙ’Ø±ÙÙ…Ù’ Ù†ÙØ²ÙÙ„ÙÙ‡ÙØŒ ÙˆÙÙˆÙØ³ÙÙ‘Ø¹Ù’ Ù…ÙØ¯Ù’Ø®ÙÙ„ÙÙ‡ÙØŒ ÙˆÙØ§ØºÙ’Ø³ÙÙ„Ù’Ù‡Ù Ø¨ÙØ§Ù„Ù’Ù…ÙØ§Ø¡Ù ÙˆÙØ§Ù„Ø«ÙÙ‘Ù„Ù’Ø¬Ù ÙˆÙØ§Ù„Ù’Ø¨ÙØ±ÙØ¯ÙØŒ ÙˆÙÙ†ÙÙ‚ÙÙ‘Ù‡Ù Ù…ÙÙ†Ù Ø§Ù„Ù’Ø®ÙØ·ÙØ§ÙŠÙØ§ ÙƒÙÙ…ÙØ§ Ù†ÙÙ‚ÙÙ‘ÙŠÙ’ØªÙ Ø§Ù„Ø«ÙÙ‘ÙˆÙ’Ø¨Ù Ø§Ù„Ø£ÙØ¨Ù’ÙŠÙØ¶Ù Ù…ÙÙ†Ù Ø§Ù„Ø¯ÙÙ‘Ù†ÙØ³ÙØŒ ÙˆÙØ£ÙØ¨Ù’Ø¯ÙÙ„Ù’Ù‡Ù Ø¯ÙØ§Ø±Ù‹Ø§ Ø®ÙÙŠÙ’Ø±Ù‹Ø§ Ù…ÙÙ†Ù’ Ø¯ÙØ§Ø±ÙÙ‡ÙØŒ ÙˆÙØ£ÙÙ‡Ù’Ù„Ù‹Ø§ Ø®ÙÙŠÙ’Ø±Ù‹Ø§ Ù…ÙÙ†Ù’ Ø£ÙÙ‡Ù’Ù„ÙÙ‡ÙØŒ ÙˆÙØ²ÙÙˆÙ’Ø¬Ù‹Ø§ Ø®ÙÙŠÙ’Ø±Ù‹Ø§ Ù…ÙÙ†Ù’ Ø²ÙÙˆÙ’Ø¬ÙÙ‡ÙØŒ ÙˆÙØ£ÙØ¯Ù’Ø®ÙÙ„Ù’Ù‡Ù Ø§Ù„Ù’Ø¬ÙÙ†ÙÙ‘Ø©ÙØŒ ÙˆÙØ£ÙØ¹ÙØ°Ù’Ù‡Ù Ù…ÙÙ†Ù’ Ø¹ÙØ°ÙØ§Ø¨Ù Ø§Ù„Ù’Ù‚ÙØ¨Ù’Ø±Ù ÙˆÙØ¹ÙØ°ÙØ§Ø¨Ù Ø§Ù„Ù†ÙÙ‘Ø§Ø±Ù
                </p>
                
                <div class="mt-4 p-4 bg-green-900/20 rounded-lg">
                    <h4 class="font-bold text-green-300 text-sm mb-2">Ú¯Û†Ú•Ø§Ù†Ú©Ø§Ø±ÛŒ Ø¨Û† Ú˜Ù† Ùˆ Ù…Ù†Ø¯Ø§Úµ:</h4>
                    <ul class="text-xs text-green-200 space-y-1 mr-4">
                        <li><span class="font-bold">Ø¨Û† Ú˜Ù†:</span> Ø¯Û•ÚµÛÛŒØª <span class="italic">"Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ø§ØºÙ’ÙÙØ±Ù’ <span class="text-yellow-300">Ù„ÙÙ‡ÙØ§</span> ÙˆÙØ§Ø±Ù’Ø­ÙÙ…Ù’<span class="text-yellow-300">Ù‡ÙØ§</span>"</span></li>
                        <li><span class="font-bold">Ø¨Û† Ù…Ù†Ø¯Ø§Úµ:</span> Ø¯Û•ÚµÛÛŒØª <span class="italic">"Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ø§Ø¬Ù’Ø¹ÙÙ„Ù’Ù‡Ù ÙÙØ±ÙØ·Ù‹Ø§ Ù„ÙÙˆÙØ§Ù„ÙØ¯ÙÙŠÙ’Ù‡Ù ÙˆÙØ³ÙØ¨ÙØ¨Ù‹Ø§ ÙÙÙŠ Ø´ÙÙÙØ§Ø¹ÙØªÙÙ‡ÙÙ…ÙØ§"</span></li>
                        <li><span class="font-bold">Ø¨Û† Ú©Û†Ù…Û•Úµ:</span> Ø¯Û•ÚµÛÛŒØª <span class="italic">"Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ø§ØºÙ’ÙÙØ±Ù’ Ù„ÙÙ‡ÙÙ…Ù’ ÙˆÙØ§Ø±Ù’Ø­ÙÙ…Ù’Ù‡ÙÙ…Ù’"</span></li>
                    </ul>
                </div>
            </div>

            <div class="glass-light p-5 rounded-2xl border-r-4 border-blue-500">
                <div class="flex items-center gap-3 mb-3">
                    <div class="w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center shadow-lg">
                        <span class="font-black text-white">Ù¤</span>
                    </div>
                    <h3 class="font-bold text-blue-400">ØªÛ•Ú©Ø¨ÛŒØ±ÛŒ Ú†ÙˆØ§Ø±Û•Ù…</h3>
                    <span class="text-xs text-gray-400 mr-auto">Ø§Ù„Ù„Ù‡ Ø£ÙÙƒÙ’Ø¨ÙØ±</span>
                </div>
                <p class="text-gray-300 mb-2 mr-13">Ø¯ÙˆØ¹Ø§ÛŒ Ú©Û†ØªØ§ÛŒÛŒ Ùˆ Ø³Û•Ù„Ø§Ù…:</p>
                <p class="italic text-blue-200 text-[13px] leading-loose mr-13 text-justify" style="line-height: 2;">
                    Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ù„Ø§ ØªÙØ­Ù’Ø±ÙÙ…Ù’Ù†ÙØ§ Ø£ÙØ¬Ù’Ø±ÙÙ‡ÙØŒ ÙˆÙÙ„Ø§ ØªÙÙÙ’ØªÙÙ†ÙÙ‘Ø§ Ø¨ÙØ¹Ù’Ø¯ÙÙ‡ÙØŒ ÙˆÙØ§ØºÙ’ÙÙØ±Ù’ Ù„ÙÙ†ÙØ§ ÙˆÙÙ„ÙÙ‡Ù<br><br>
                    <span class="text-yellow-300 block mt-2">Ø³Û•Ù„Ø§Ù…Û•Ú©Û•:</span>
                    <span class="text-white">Ø§Ù„Ø³ÙÙ‘Ù„ÙØ§Ù…Ù Ø¹ÙÙ„ÙÙŠÙ’ÙƒÙÙ…Ù’ ÙˆÙØ±ÙØ­Ù’Ù…ÙØ©Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù ÙˆÙØ¨ÙØ±ÙÙƒÙØ§ØªÙÙ‡Ù</span>
                </p>
                
                <div class="mt-4 grid grid-cols-2 gap-3">
                    <div class="bg-blue-900/30 p-3 rounded-xl">
                        <h4 class="text-xs font-bold text-blue-300 mb-1">Ø´ÛÙˆØ§Ø²ÛŒ ÛŒÛ•Ú©Û•Ù…:</h4>
                        <p class="text-[11px] text-gray-300">Ø³Û•Ù„Ø§Ù… Ù„Û• Ú•Ø§Ø³ØªÛ•ÙˆÛ• ÛŒÛ•Ú© Ø¬Ø§Ø± Ø¯Û•Ø¯Û•ÛŒØªÛ•ÙˆÛ•</p>
                    </div>
                    <div class="bg-purple-900/30 p-3 rounded-xl">
                        <h4 class="text-xs font-bold text-purple-300 mb-1">Ø´ÛÙˆØ§Ø²ÛŒ Ø¯ÙˆÙˆÛ•Ù…:</h4>
                        <p class="text-[11px] text-gray-300">Ø³Û•Ù„Ø§Ù… Ù„Û• Ú•Ø§Ø³Øª Ùˆ Ú†Û•Ù¾Û•ÙˆÛ• Ø¯Û•Ø¯Û•ÛŒØªÛ•ÙˆÛ•</p>
                    </div>
                </div>
            </div>

            <!-- Ø¯ÙˆØ¹Ø§ Ùˆ ØªÛ•Ø³Ø¨ÛŒØ­ÛŒ Ú©Û†ØªØ§ÛŒÛŒ -->
            <div class="glass-light p-5 rounded-2xl border-r-4 border-purple-500">
                <div class="flex items-center gap-3 mb-3">
                    <div class="w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center shadow-lg">
                        <i class="fas fa-hands-praying text-white"></i>
                    </div>
                    <h3 class="font-bold text-purple-400">Ø¯ÙˆØ¹Ø§ Ùˆ ØªÛ•Ø³Ø¨ÛŒØ­ÛŒ Ø¯ÙˆØ§ÛŒ Ù†ÙˆÛÚ˜</h3>
                </div>
                
                <div class="space-y-3">
                    <div class="p-3 bg-purple-900/20 rounded-lg">
                        <h4 class="text-xs font-bold text-purple-300 mb-1">Ø¯ÙˆØ¹Ø§ÛŒ Ú©Û†ØªØ§ÛŒÛŒ:</h4>
                        <p class="italic text-purple-200 text-[12px] leading-relaxed">
                            Ø³ÙØ¨Ù’Ø­ÙØ§Ù†Ù Ø±ÙØ¨ÙÙ‘ÙƒÙ Ø±ÙØ¨ÙÙ‘ Ø§Ù„Ù’Ø¹ÙØ²ÙÙ‘Ø©Ù Ø¹ÙÙ…ÙÙ‘Ø§ ÙŠÙØµÙÙÙÙˆÙ†ÙØŒ ÙˆÙØ³ÙÙ„ÙØ§Ù…ÙŒ Ø¹ÙÙ„ÙÙ‰ Ø§Ù„Ù’Ù…ÙØ±Ù’Ø³ÙÙ„ÙÙŠÙ†ÙØŒ ÙˆÙØ§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙÙ‘Ù‡Ù Ø±ÙØ¨ÙÙ‘ Ø§Ù„Ù’Ø¹ÙØ§Ù„ÙÙ…ÙÙŠÙ†Ù
                        </p>
                    </div>
                    
                    <div class="p-3 bg-emerald-900/20 rounded-lg">
                        <h4 class="text-xs font-bold text-emerald-300 mb-1">ØªÛ•Ø³Ø¨ÛŒØ­ÛŒ Ú•Ø§Ø³ØªÛ•Ù‚ÛŒÙ†Û•:</h4>
                        <p class="text-emerald-200 text-[12px]">
                            Ø¯Û•ÚµÛÛŒØª: <span class="italic">"Ø³ÙØ¨Ù’Ø­ÙØ§Ù†Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù"</span> Ù£Ù£ Ø¬Ø§Ø±<br>
                            Ø¯Û•ÚµÛÛŒØª: <span class="italic">"Ø§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙÙ‘Ù‡Ù"</span> Ù£Ù£ Ø¬Ø§Ø±<br>
                            Ø¯Û•ÚµÛÛŒØª: <span class="italic">"Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø£ÙÙƒÙ’Ø¨ÙØ±Ù"</span> Ù£Ù£ Ø¬Ø§Ø±<br>
                            Ú©Û†ØªØ§ÛŒÛŒ: <span class="italic">"Ù„ÙØ§ Ø¥ÙÙ„ÙÙ‡Ù Ø¥ÙÙ„ÙÙ‘Ø§ Ø§Ù„Ù„ÙÙ‘Ù‡Ù ÙˆÙØ­Ù’Ø¯ÙÙ‡Ù Ù„ÙØ§ Ø´ÙØ±ÙÙŠÙƒÙ Ù„ÙÙ‡ÙØŒ Ù„ÙÙ‡Ù Ø§Ù„Ù’Ù…ÙÙ„Ù’ÙƒÙ ÙˆÙÙ„ÙÙ‡Ù Ø§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù ÙˆÙÙ‡ÙÙˆÙ Ø¹ÙÙ„ÙÙ‰ ÙƒÙÙ„ÙÙ‘ Ø´ÙÙŠÙ’Ø¡Ù Ù‚ÙØ¯ÙÙŠØ±ÙŒ"</span>
                        </p>
                    </div>
                    
                    <div class="p-3 bg-amber-900/20 rounded-lg">
                        <h4 class="text-xs font-bold text-amber-300 mb-1">Ø¯ÙˆØ¹Ø§ÛŒ Ø®ÛØ±:</h4>
                        <p class="text-amber-200 text-[12px] italic">
                            Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ø£ÙØ¬ÙØ±Ù’Ù†ÙÙŠ ÙÙÙŠ Ù…ÙØµÙÙŠØ¨ÙØªÙÙŠØŒ ÙˆÙØ§Ø®Ù’Ù„ÙÙÙ’ Ù„ÙÙŠ Ø®ÙÙŠÙ’Ø±Ù‹Ø§ Ù…ÙÙ†Ù’Ù‡ÙØ§
                        </p>
                    </div>
                </div>
            </div>

            <!-- ØªÛØ¨ÛŒÙ†ÛŒ Ùˆ ÙÛ•Ø±Ù…Ø§Ù†Û•Ú©Ø§Ù† -->
            <div class="glass-light p-4 rounded-2xl bg-gradient-to-r from-gray-900/50 to-gray-800/50 border border-gray-700">
                <h4 class="font-bold text-yellow-400 text-sm mb-3 flex items-center gap-2">
                    <i class="fas fa-lightbulb"></i>ÙÛ•Ø±Ù…Ø§Ù† Ùˆ ØªÛØ¨ÛŒÙ†ÛŒÛ• Ú¯Ø±Ù†Ú¯Û•Ú©Ø§Ù†
                </h4>
                <ul class="text-xs text-gray-300 space-y-2 mr-4">
                    <li class="flex items-start gap-2">
                        <i class="fas fa-check-circle text-green-400 mt-0.5"></i>
                        <span>Ù†ÙˆÛÚ˜ÛŒ Ø¬Û•Ù†Ø§Ø²Û• <span class="text-yellow-300">Ú†ÙˆØ§Ø± ØªÛ•Ú©Ø¨ÛŒØ±</span> Ùˆ <span class="text-yellow-300">Ø³Û ØªÛ•Ú©Ø¨ÛŒØ±</span> Ù‡Û•ÛŒÛ•ØŒ Ø¦Û•Ù…Û• Ú†ÙˆØ§Ø± ØªÛ•Ú©Ø¨ÛŒØ±Û•.</span>
                    </li>
                    <li class="flex items-start gap-2">
                        <i class="fas fa-check-circle text-green-400 mt-0.5"></i>
                        <span>Ù†ÙˆÛÚ˜ <span class="text-yellow-300">Ø¨Û•Ù‡Û•Ù…ÙˆÙˆ Ù‚ÙˆØ±Ø¦Ø§Ù†ÛÚ©</span> Ø¨Ú©Ø±ÛØª Ø¯Û•ØªÙˆØ§Ù†ÛŒØªØŒ ØªÛ•Ù†Ù‡Ø§ Ø³ÙˆÙˆØ±Û•ØªÛŒ ÙØ§ØªØ­Û• Ù„Û•Ø³Û•Ø± Ù‡Û•Ù…ÙˆÙˆØ§Ù† ÙˆØ§Ø¬Ø¨Û•.</span>
                    </li>
                    <li class="flex items-start gap-2">
                        <i class="fas fa-check-circle text-green-400 mt-0.5"></i>
                        <span>Ø¦ÛŒÙ…Ø§Ù… Ù„Û• <span class="text-yellow-300">Ø³Û•Ø±ÛŒ Ù…Ø±Ø¯ÙˆÙˆ</span> Ø¯Ø§Ø¯Û•Ù†ÛŒØ´Øª (Ù¾ÛŒØ§Ùˆ Ù„Û• Ø³Û•Ø±ÛŒØŒ Ú˜Ù† Ù„Û• Ù†Ø§ÙˆÛ•Ú•Ø§Ø³ØªÛŒ).</span>
                    </li>
                    <li class="flex items-start gap-2">
                        <i class="fas fa-check-circle text-green-400 mt-0.5"></i>
                        <span>Ù†ÙˆÛÚ˜ÛŒ Ø¬Û•Ù†Ø§Ø²Û• <span class="text-yellow-300">Ù„Û•Ø³Û•Ø± Ø²Û•ÙˆÛŒ Ù¾Ø§Ú©</span> ÛŒØ§Ù† Ù„Û•Ø³Û•Ø± Ø­Û•Ø³ÛŒØ± Ø¯Û•Ú©Ø±ÛØªØŒ Ù„Û• Ù†Ø§Ùˆ Ù…Ø²Ú¯Û•ÙˆØªØ¯Ø§ Ù†Ø§Ú©Ø±ÛØª.</span>
                    </li>
                    <li class="flex items-start gap-2">
                        <i class="fas fa-check-circle text-green-400 mt-0.5"></i>
                        <span>Ø¦Û•Ú¯Û•Ø± <span class="text-yellow-300">Ù†Ø²ÛŒÚ©ØªØ±ÛŒÙ† Ø®Ø²Ù…</span> Ø¨ÛØªØŒ Ù„Û• Ù¾ÛØ´Û•ÙˆÛ•ÛŒ Ø¦ÛŒÙ…Ø§Ù… Ø¯Ø§Ø¯Û•Ù†ÛŒØ´Øª.</span>
                    </li>
                    <li class="flex items-start gap-2">
                        <i class="fas fa-check-circle text-green-400 mt-0.5"></i>
                        <span>Ø¯ÙˆØ§ÛŒ ØªÛ•ÙˆØ§ÙˆØ¨ÙˆÙˆÙ†ÛŒ Ù†ÙˆÛÚ˜ØŒ <span class="text-yellow-300">Ù†Û•Ú©ÙˆØªØ±Ø§</span> Ùˆ Ø¯Û•Ø³Øª Ù…Û•Ú©ÛØ´Û• Ø¨Û•Ø³Û•Ø± Ù…Ø±Ø¯ÙˆÙˆØ¯Ø§.</span>
                    </li>
                </ul>
                
                <div class="mt-3 p-3 bg-black/40 rounded-lg">
                    <p class="text-xs text-center text-gray-400">
                        <i class="fas fa-info-circle ml-1"></i>
                        Ø¦Û•Ù… Ø¯ÙˆØ¹Ø§ÛŒØ§Ù†Û• Ø¨Û•Ù¾ÛÛŒ Ø³ÙˆÙ†Ù†Û•ØªÛŒ Ù¾ÛØºÛ•Ù…Ø¨Û•Ø± ï·º Ùˆ ÙÛ•Ø±Ù…ÙˆÙˆØ¯Û•ÛŒ Ø¯Û•Ø³ØªÛ•ÚµØ§ØªØ¯Ø§Ø±Ø§Ù†Û•
                    </p>
                </div>
            </div>
        </div>
        
        <button onclick="toggleModal('janazaModal')" class="w-full mt-6 py-4 bg-gradient-to-r from-green-600 to-emerald-600 rounded-2xl font-bold shadow-lg hover:opacity-90 transition">
            <i class="fas fa-times-circle ml-1"></i>Ø¯Ø§Ø®Ø³ØªÙ†
        </button>
    </div>
</div>

<!-- Admin Modal -->
<div id="adminModal" class="modal-container" onclick="if(event.target==this) toggleModal('adminModal')">
    <div class="glass w-full max-w-lg rounded-[32px] p-6 shadow-2xl max-h-[85vh] overflow-y-auto">
        <div class="flex items-center justify-between mb-6">
            <h2 class="text-2xl font-black"><i class="fas fa-shield-alt text-blue-400 ml-2"></i>Ø¦Û•Ø¯Ù…ÛŒÙ†</h2>
            <button onclick="toggleModal('adminModal')" class="w-10 h-10 rounded-xl glass-light flex items-center justify-center">
                <i class="fas fa-times text-gray-400"></i>
            </button>
        </div>

        <!-- Admin Password -->
        <input type="password" id="adminPass" placeholder="ğŸ”’ Ú©Û†Ø¯ÛŒ Ø¦Û•Ø¯Ù…ÛŒÙ†" class="w-full glass-light p-4 rounded-2xl mb-4 outline-none border border-white/10 text-center font-bold placeholder-gray-500">

        <div class="glass-light p-2 rounded-2xl flex gap-2 mb-4">
            <button onclick="showAdminTab('funeral')" id="tabFuneral" class="flex-1 py-3 rounded-xl bg-red-600 font-bold text-sm">
                <i class="fas fa-hands-praying ml-1"></i>Ù¾Ø±Ø³Û•
            </button>
            <button onclick="showAdminTab('mosque')" id="tabMosque" class="flex-1 py-3 rounded-xl text-gray-400 font-bold text-sm">
                <i class="fas fa-mosque ml-1"></i>Ù…Ø²Ú¯Û•ÙˆØª
            </button>
        </div>

        <div id="funeralForm" class="space-y-3">
            <div class="glass-light p-4 rounded-2xl">
                <h3 class="font-bold text-sm mb-3 text-red-400"><i class="fas fa-plus-circle ml-1"></i>Ù¾Ø±Ø³Û•ÛŒ Ù†ÙˆÛ</h3>
                <select id="mosqueSelect" class="w-full bg-black/30 p-4 rounded-xl outline-none border border-white/10 mb-3"></select>
                <input id="deceasedName" placeholder="Ù†Ø§ÙˆÛŒ Ú©Û†Ú†Ú©Ø±Ø¯ÙˆÙˆ" class="w-full bg-black/30 p-4 rounded-xl outline-none border border-white/10 mb-3">
                <input id="prayerTime" type="time" class="w-full bg-black/30 p-4 rounded-xl outline-none border border-white/10 mb-3">
                <button onclick="submitFuneral()" class="w-full bg-red-600 py-4 rounded-2xl font-bold">
                    <i class="fas fa-paper-plane ml-1"></i>Ø¨ÚµØ§ÙˆÚ©Ø±Ø¯Ù†Û•ÙˆÛ•
                </button>
            </div>
            <div class="glass-light p-4 rounded-2xl">
                <h3 class="text-sm font-bold text-red-400 mb-3"><i class="fas fa-list ml-1"></i>Ù¾Ø±Ø³Û• Ú†Ø§Ù„Ø§Ú©Û•Ú©Ø§Ù†</h3>
                <div id="adminFuneralList" class="space-y-2 max-h-48 overflow-y-auto"></div>
            </div>
        </div>

        <div id="mosqueForm" class="hidden space-y-3">
            <div class="glass-light p-4 rounded-2xl">
                <h3 class="font-bold text-sm mb-3 text-green-400"><i class="fas fa-plus-circle ml-1"></i>Ù…Ø²Ú¯Û•ÙˆØªÛŒ Ù†ÙˆÛ</h3>
                <input id="mosqueName" placeholder="Ù†Ø§ÙˆÛŒ Ù…Ø²Ú¯Û•ÙˆØª" class="w-full bg-black/30 p-4 rounded-xl outline-none border border-white/10 mb-3">
                <div class="grid grid-cols-2 gap-3 mb-3">
                    <input id="mosqueLat" placeholder="Lat" class="bg-black/30 p-4 rounded-xl text-center text-xs outline-none border border-white/10">
                    <input id="mosqueLng" placeholder="Lng" class="bg-black/30 p-4 rounded-xl text-center text-xs outline-none border border-white/10">
                </div>
                <button onclick="useCurrentLocation()" class="w-full bg-blue-600 py-3 rounded-xl text-sm font-bold mb-3">
                    <i class="fas fa-crosshairs ml-1"></i>Ø´ÙˆÛÙ†ÛŒ Ø¦ÛØ³ØªØ§
                </button>
                <button onclick="submitMosque()" class="w-full bg-green-600 py-4 rounded-2xl font-bold">
                    <i class="fas fa-plus ml-1"></i>Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†
                </button>
            </div>
        </div>

        <!-- Ø¨Û†ØªÛŒ Ø¦Û•Ø¯Ù…ÛŒÙ† -->
        
        
        <button onclick="toggleModal('adminModal')" class="w-full mt-4 py-4 glass-light rounded-2xl font-bold">
            Ø¯Ø§Ø®Ø³ØªÙ†
        </button>
    </div>
</div>

<!-- Toast -->
<div id="toastNotif" class="toast-container">
    <div class="glass px-6 py-3 rounded-2xl flex items-center gap-3 shadow-2xl">
        <i id="toastIcon" class="fas fa-check-circle text-green-400 text-xl"></i>
        <span id="toastMessage" class="text-sm font-bold">Ø³Û•Ø±Ú©Û•ÙˆØªÙˆÙˆ</span>
    </div>
</div>

<script>
    const firebaseConfig = {
        apiKey: "AIzaSyAoPWYvcDV875kkrU2Op7kSUV2GGmqdUkA",
        authDomain: "hajiawa-map-6fca6.firebaseapp.com",
        databaseURL: "https://hajiawa-map-6fca6-default-rtdb.europe-west1.firebasedatabase.app/",
        projectId: "hajiawa-map-6fca6",
        storageBucket: "hajiawa-map-6fca6.firebasestorage.app",
        messagingSenderId: "631946456317",
        appId: "1:631946456317:web:3e08997a9ec6bd0865a294"
    };

    let map, db, userMarker, routingControl, currentTileLayer;
    let mosques = [];
    let funerals = {};
    let selectedMosque = null;
    let userPos = null;
    let prayerTimes = null;

    // Ù…Ø²Ú¯Û•ÙˆØªÛ• Ú•Ø§Ø³ØªÛ•Ù‚ÛŒÙ†Û•Ú©Ø§Ù†ÛŒ Ø­Ø§Ø¬ÛŒØ§ÙˆØ§ - ÙˆÛ•Ú© Ú©Û†Ø¯ÛŒ Ø³Û•Ø±Û•ØªØ§ÛŒÛŒ ØªÛ†
    const BACKUP_MOSQUES = [
        {id: "m1", name: "Ù…Ø²Ú¯Û•ÙˆØªÛŒ Ú¯Û•ÙˆØ±Û•ÛŒ Ø­Ø§Ø¬ÛŒØ§ÙˆØ§", lat: 36.2369, lng: 44.7869, description: "Ù…Ø²Ú¯Û•ÙˆØªÛŒ Ú¯Û•ÙˆØ±Û•ÛŒ Ø´Ø§Ø±"},
        {id: "m2", name: "Ù…Ø²Ú¯Û•ÙˆØªÛŒ Ø´Û•Ú¾ÛŒØ¯Ø§Ù†", lat: 36.2355, lng: 44.7885},
        {id: "m3", name: "Ù…Ø²Ú¯Û•ÙˆØªÛŒ Ø¯Ø§Ø¨Ø§Ù†", lat: 36.2340, lng: 44.7890},
        {id: "m4", name: "Ù…Ø²Ú¯Û•ÙˆØªÛŒ Ù…Ø§Ú©Û†Ú©", lat: 36.2335, lng: 44.7875},
        {id: "m5", name: "Ù…Ø²Ú¯Û•ÙˆØªÛŒ Ù‚Û•Ù„Ø§ÙˆÛ•ÛŒÛŒØ§Ù†", lat: 36.2320, lng: 44.7860},
        {id: "m12", name: "Ù…Ø²Ú¯Û•ÙˆØªÛŒ Ø´Ø§ÙØ¹ÛŒ Ú¯Û•ÙˆØ±Û•", lat: 36.2410, lng: 44.7880},
        {id: "m21", name: "Ù…Ø²Ú¯Û•ÙˆØªÛŒ Ù†ÙˆØ±", lat: 36.2390, lng: 44.7820},
        {id: "m31", name: "Ù…Ø²Ú¯Û•ÙˆØªÛŒ Ø³Û•Ù„Ø§Ø­Û•Ø¯ÛŒÙ†", lat: 36.2340, lng: 44.7850}
    ];

    window.addEventListener('load', async () => {
        try {
            firebase.initializeApp(firebaseConfig);
            db = firebase.database();
            console.log("âœ… Firebase");
            updateLoadStatus("Ú¯Ø±ÛØ¯Ø±Ø§ÙˆÛ•...");
        } catch(e) {
            console.warn("âš ï¸ Offline");
            updateLoadStatus("Ø¦Û†ÙÙ„Ø§ÛŒÙ†...");
        }

        initMap();
        await loadMosques();
        updatePrayerTimes();
        setInterval(updatePrayerTimes, 60000);
        setInterval(updateCurrentTimeDisplay, 1000);
        autoDeleteOldFunerals();
        
        setTimeout(() => {
            const splash = document.getElementById('splashScreen');
            splash.style.opacity = '0';
            setTimeout(() => splash.style.display = 'none', 700);
        }, 2500);
    });

    function updateLoadStatus(msg) {
        const el = document.getElementById('loadStatus');
        if(el) el.textContent = msg;
    }

    function initMap() {
        map = L.map('map', {
            zoomControl: false,
            attributionControl: false,
            minZoom: 12,
            maxZoom: 20
        }).setView([36.2369, 44.7869], 14);

        const darkLayer = L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {maxZoom: 20});
        const satelliteLayer = L.tileLayer('https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}', {maxZoom: 20});
        const streetLayer = L.tileLayer('https://mt1.google.com/vt/lyrs=m&x={x}&y={y}&z={z}', {maxZoom: 20});
        const terrainLayer = L.tileLayer('https://mt1.google.com/vt/lyrs=p&x={x}&y={y}&z={z}', {maxZoom: 20});

        darkLayer.addTo(map);
        currentTileLayer = darkLayer;

        window.mapLayers = {dark: darkLayer, satellite: satelliteLayer, street: streetLayer, terrain: terrainLayer};
        
        map.locate({setView: true, maxZoom: 15});
        map.on('locationfound', (e) => {
            userPos = e.latlng;
            if(userMarker) map.removeLayer(userMarker);
            userMarker = L.marker(e.latlng, {
                icon: L.divIcon({
                    className: 'bg-transparent',
                    html: '<div class="user-marker"></div>',
                    iconSize: [20, 20],
                    iconAnchor: [10, 10]
                })
            }).addTo(map);
            updateNearbyCount();
        });

        map.on('locationerror', () => showToast('Ú©ÛØ´Û• Ù„Û• Ø´ÙˆÛÙ†', 'error'));
        map.on('click', (e) => {
            document.getElementById('mosqueLat').value = e.latlng.lat.toFixed(6);
            document.getElementById('mosqueLng').value = e.latlng.lng.toFixed(6);
        });
    }

    function changeMapStyle(style) {
        if(currentTileLayer) map.removeLayer(currentTileLayer);
        const layer = window.mapLayers[style];
        if(layer) {
            layer.addTo(map);
            currentTileLayer = layer;
            showToast(`Ú¯Û†Ú•Ø¯Ø±Ø§ Ø¨Û† ${style}`);
        }
        toggleMapStyleMenu();
    }

    function toggleMapStyleMenu() {
        const menu = document.getElementById('mapStyleMenu');
        menu.classList.toggle('hidden');
    }

    async function loadMosques() {
        try {
            // Fetch from OSM
            const query = `[out:json];node["amenity"="place_of_worship"]["religion"="muslim"](36.21,44.75,36.26,44.83);out;`;
            let osmMosques = [];
            
            try {
                const res = await fetch('https://overpass-api.de/api/interpreter', {method:'POST', body:query});
                const data = await res.json();
                osmMosques = data.elements.map(e => ({
                    id: 'osm_' + e.id,
                    name: e.tags['name:ckb'] || e.tags.name || 'Ù…Ø²Ú¯Û•ÙˆØª',
                    lat: e.lat,
                    lng: e.lon
                }));
            } catch(e) {}

            if(db) {
                db.ref('customMosques').on('value', (snap) => {
                    const custom = snap.val() ? Object.values(snap.val()) : [];
                    const all = [...BACKUP_MOSQUES, ...osmMosques, ...custom];
                    mosques = all.filter((m, i, a) => a.findIndex(t => t.id === m.id) === i);
                    renderMarkers();
                    updateAdminSelect();
                    updateStats();
                });

                db.ref('funerals').on('value', (snap) => {
                    funerals = snap.val() || {};
                    renderMarkers();
                    updateStats();
                    updateHeaderBadge();
                    updateAdminFuneralList();
                });
            } else {
                mosques = [...BACKUP_MOSQUES, ...osmMosques];
                renderMarkers();
                updateAdminSelect();
                updateStats();
            }
        } catch(e) {
            mosques = BACKUP_MOSQUES;
            renderMarkers();
            updateStats();
        }
    }

    function renderMarkers() {
        map.eachLayer(l => {
            if(l instanceof L.Marker && l !== userMarker) map.removeLayer(l);
        });

        mosques.forEach(m => {
            const hasFun = funerals[m.id];
            const icon = L.divIcon({
                className: 'bg-transparent',
                html: hasFun ? '<div class="marker-funeral"><i class="fas fa-hands-praying"></i></div>' : '<div class="marker-mosque"><i class="fas fa-moon"></i></div>',
                iconSize: hasFun ? [52,52] : [40,40],
                iconAnchor: hasFun ? [26,52] : [20,20]
            });
            L.marker([m.lat, m.lng], {icon}).addTo(map).on('click', () => openDetailCard(m, hasFun));
        });
    }

    function openDetailCard(m, fun) {
        selectedMosque = m;
        document.getElementById('cardTitle').textContent = m.name;
        
        const iconDiv = document.getElementById('cardIcon');
        if(fun) {
            iconDiv.className = 'relative w-20 h-20 bg-gradient-to-br from-red-500 to-red-600 rounded-full border-4 border-ultra-dark flex items-center justify-center shadow-2xl';
            iconDiv.innerHTML = '<i class="fas fa-hands-praying text-3xl text-white"></i>';
        } else {
            iconDiv.className = 'relative w-20 h-20 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full border-4 border-ultra-dark flex items-center justify-center shadow-2xl';
            iconDiv.innerHTML = '<i class="fas fa-mosque text-3xl text-white"></i>';
        }

        if(userPos) {
            const dist = (map.distance(userPos, [m.lat, m.lng]) / 1000).toFixed(1);
            document.getElementById('cardDistText').textContent = dist + ' km';
            document.getElementById('cardDistance').classList.remove('hidden');
        } else {
            document.getElementById('cardDistance').classList.add('hidden');
        }

        const detDiv = document.getElementById('cardDetails');
        if(m.description) {
            detDiv.classList.remove('hidden');
            document.getElementById('cardDescription').textContent = m.description;
        } else {
            detDiv.classList.add('hidden');
        }

        const alert = document.getElementById('cardFuneralAlert');
        if(fun) {
            alert.classList.remove('hidden');
            document.getElementById('cardDeadName').textContent = fun.name;
            document.getElementById('cardPrayerTime').textContent = 'Ú©Ø§Øª: ' + fun.time;
        } else {
            alert.classList.add('hidden');
        }

        document.getElementById('detailCard').style.transform = 'translateY(0)';
        map.flyTo([m.lat, m.lng], 16, {duration: 1.2});
    }

    function closeCard() {
        document.getElementById('detailCard').style.transform = 'translateY(100%)';
        if(routingControl) {
            map.removeControl(routingControl);
            routingControl = null;
        }
    }

    function startNavigation() {
        if(!userPos) return showToast('Ø´ÙˆÛÙ† Ù†Û•Ø¯Û†Ø²Ø±Ø§ÛŒÛ•ÙˆÛ•', 'error');
        if(!selectedMosque) return showToast('Ù‡Û•ÚµØ¨Ú˜ÛØ±Û•', 'error');
        
        closeCard();
        if(routingControl) map.removeControl(routingControl);
        
        routingControl = L.Routing.control({
            waypoints: [L.latLng(userPos.lat, userPos.lng), L.latLng(selectedMosque.lat, selectedMosque.lng)],
            lineOptions: {styles: [{color: '#3b82f6', opacity: 0.9, weight: 6}]},
            createMarker: () => null,
            show: false
        }).addTo(map);
        
        showToast('Ú•ÛÚ¯Ø§Ú©ÛØ´Ø§Ù† Ø¯Û•Ø³ØªÛŒ Ù¾ÛÚ©Ø±Ø¯');
    }

    function handleSearch() {
        const q = document.getElementById('searchInput').value.toLowerCase().trim();
        if(q.length < 2) return;
        const found = mosques.find(m => m.name.toLowerCase().includes(q));
        if(found) {
            map.flyTo([found.lat, found.lng], 17);
            setTimeout(() => openDetailCard(found, funerals[found.id]), 1500);
        } else {
            showToast('Ù†Û•Ø¯Û†Ø²Ø±Ø§ÛŒÛ•ÙˆÛ•', 'error');
        }
    }

    function clearSearch() {
        document.getElementById('searchInput').value = '';
    }

    function updatePrayerTimes() {
        // Ú©Ø§ØªÛ•Ú©Ø§Ù†ÛŒ Ù†ÙˆÛÚ˜ÛŒ Ù‚Û•Ø²Ø§ÛŒ Ø­Ø§Ø¬ÛŒØ§ÙˆØ§ Ø¨Û•Ù¾ÛÛŒ Ú•Û†Ú˜ (Ø¨Û• Ú©Ø§ØªÛŒ Ù‡Ø§ÙˆÛŒÙ†Û•)
        const now = new Date();
        
        // Ú©Ø§ØªÛ•Ú©Ø§Ù†ÛŒ Ù†Ø²ÛŒÚ©Û•Ú©Ø§Ù† Ø¨Û† Ø­Ø§Ø¬ÛŒØ§ÙˆØ§
        const prayerSchedule = [
            {name: 'Ø¨Û•ÛŒØ§Ù†ÛŒ', time: '04:30', icon: 'fa-moon', arabic: 'Ø§Ù„ÙØ¬Ø±'},
            {name: 'Ø®Û†Ø±Ù‡Û•ÚµØ§Øª', time: '05:45', icon: 'fa-sun', arabic: 'Ø§Ù„Ø´Ø±ÙˆÙ‚'},
            {name: 'Ù†ÛŒÙˆÛ•Ú•Û†', time: '12:15', icon: 'fa-cloud-sun', arabic: 'Ø§Ù„Ø¸Ù‡Ø±'},
            {name: 'Ø¹Û•Ø³Ø±', time: '15:45', icon: 'fa-cloud', arabic: 'Ø§Ù„Ø¹ØµØ±'},
            {name: 'Ù…Û•ØºØ±ÛŒØ¨', time: '18:55', icon: 'fa-sunset', arabic: 'Ø§Ù„Ù…ØºØ±Ø¨'},
            {name: 'Ø¹ÛŒØ´Ø§', time: '20:15', icon: 'fa-moon-stars', arabic: 'Ø§Ù„Ø¹Ø´Ø§Ø¡'}
        ];
        
        // Ú•Û†Ú˜Û•Ú©Ø§Ù†ÛŒ Ù‡Û•ÛŒÙ†ÛŒ Ú©Ø§ØªÛ•Ú©Ø§Ù† Ø¬ÛŒØ§ÙˆØ§Ø²Û•
        const isFriday = now.getDay() === 5; // 5 = Ù‡Û•ÛŒÙ†ÛŒ
        if(isFriday) {
            prayerSchedule[2].time = '12:45'; // Ù†ÙˆÛÚ˜ÛŒ Ù‡Û•ÛŒÙ†ÛŒ Ø¯Ø±ÛÚ˜ØªØ±Û•
        }
        
        const list = document.getElementById('prayerList');
        list.innerHTML = '';
        
        const currentMinutes = now.getHours() * 60 + now.getMinutes();
        
        let nextPrayerFound = false;
        let nextPrayerTime = null;
        let nextPrayerName = '';
        
        prayerSchedule.forEach(prayer => {
            const [hours, minutes] = prayer.time.split(':').map(Number);
            const prayerMinutes = hours * 60 + minutes;
            
            const isNext = !nextPrayerFound && prayerMinutes > currentMinutes;
            if(isNext) {
                nextPrayerFound = true;
                nextPrayerTime = prayerMinutes;
                nextPrayerName = prayer.name;
                
                // Ù†ÙˆÛÚ˜ÛŒ Ø¯Ø§Ù‡Ø§ØªÙˆÙˆ Ù†ÛŒØ´Ø§Ù† Ø¨Ø¯Û• Ù„Û• Ø³Û•Ø±Û•ÙˆÛ•
                document.getElementById('prayerNotif').textContent = prayer.name;
                document.getElementById('prayerNotif').classList.remove('hidden');
            }
            
            // Ú©Ø§ØªÛŒ Ù…Ø§ÙˆÛ•
            let timeRemaining = '';
            if(prayerMinutes > currentMinutes) {
                const remaining = prayerMinutes - currentMinutes;
                const hoursRemaining = Math.floor(remaining / 60);
                const minutesRemaining = remaining % 60;
                timeRemaining = `${hoursRemaining > 0 ? hoursRemaining + 'Ú©' : ''}${minutesRemaining}Ø®`;
            } else if(prayerMinutes < currentMinutes) {
                timeRemaining = 'ØªÛ•ÙˆØ§Ùˆ Ø¨ÙˆÙˆ';
            }
            
            list.innerHTML += `
                <div class="flex justify-between items-center p-4 rounded-2xl ${isNext ? 'prayer-next' : 'glass-light'} transition-all">
                    <div class="flex items-center gap-3">
                        <div class="w-11 h-11 rounded-xl bg-gradient-to-br ${isNext ? 'from-blue-500 to-purple-500' : 'from-white/10 to-white/5'} flex items-center justify-center shadow-lg">
                            <i class="fas ${prayer.icon} ${isNext ? 'text-white' : 'text-gray-400'}"></i>
                        </div>
                        <div>
                            <span class="font-bold text-sm ${isNext ? 'text-white' : 'text-gray-300'}">${prayer.name}</span>
                            <span class="block text-[10px] ${isNext ? 'text-blue-300' : 'text-gray-500'} mt-0.5">${prayer.arabic}</span>
                            ${isNext ? '<span class="block text-xs text-blue-300 mt-0.5">Ù†ÙˆÛÚ˜ÛŒ Ø¯Ø§Ù‡Ø§ØªÙˆÙˆ</span>' : ''}
                        </div>
                    </div>
                    <div class="text-right">
                        <span class="font-mono text-lg font-bold ${isNext ? 'text-blue-200' : 'text-gray-400'} block">${prayer.time}</span>
                        <span class="text-xs ${isNext ? 'text-blue-300' : 'text-gray-500'} font-mono">${timeRemaining}</span>
                    </div>
                </div>
            `;
        });
        
        // Ø¦Û•Ú¯Û•Ø± Ù‡Û•Ù…ÙˆÙˆ Ù†ÙˆÛÚ˜Û•Ú©Ø§Ù† ØªÛ•ÙˆØ§Ùˆ Ø¨ÙˆÙˆÙ†ØŒ Ù†ÙˆÛÚ˜ÛŒ Ø¨Û•ÛŒØ§Ù†ÛŒ Ø¯Û•Ø³ØªÙ¾ÛØ¯Û•Ú©Û•
        if(!nextPrayerFound) {
            document.getElementById('prayerNotif').textContent = 'Ø¨Û•ÛŒØ§Ù†ÛŒ';
            document.getElementById('prayerNotif').classList.remove('hidden');
        }
        
        // Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ ØªÛØ¨ÛŒÙ†ÛŒ Ø¨Û† Ø­Ø§Ø¬ÛŒØ§ÙˆØ§
        const notes = [
            "Ú©Ø§ØªÛŒ Ù†ÙˆÛÚ˜ÛŒ Ø­Ø§Ø¬ÛŒØ§ÙˆØ§ Ø¨Û•Ù¾ÛÛŒ Ú•Û†Ú˜ÛÚ©ÛŒ Ù†Ø§ÙˆÛ•Ù†Ø¯ÛŒ Ú©ÙˆØ±Ø¯Ø³ØªØ§Ù†Û•",
            "Ù„Û• Ù…Ø§Ù†Ú¯Û•Ú©Ø§Ù†Ø¯Ø§ Ú©Ø§ØªÛ•Ú©Ø§Ù† Â±Ù¡Ù  Ø®ÙˆÙ„Û•Ú© Ø¯Û•Ú¯Û†Ú•ÛÙ†",
            "Ù†ÙˆÛÚ˜ÛŒ Ù‡Û•ÛŒÙ†ÛŒ Ù„Û• Ø­Ø§Ø¬ÛŒØ§ÙˆØ§ Ù£Ù  Ø®ÙˆÙ„Û•Ú© Ø¯ÙˆØ§ØªØ±Û•",
            "Ú©Ø§ØªÛŒ Ø¹Û•Ø³Ø± Ø¨Û•Ù¾ÛÛŒ Ø´Û•ÙÛ•ÛŒ Ø¦ÛŒÙ…Ø§Ù… Ø´Ø§ÙØ¹ÛŒÛ•",
            "Ú©Ø§ØªÛŒ Ù…Û•ØºØ±ÛŒØ¨ Ù¥ Ø®ÙˆÙ„Û•Ú© Ø¯ÙˆØ§ÛŒ Ø®Û†Ø±Ø¦Ø§ÙˆØ§ÙˆÙ†"
        ];
        const noteText = notes[Math.floor(Math.random() * notes.length)];
        
        const note = document.createElement('div');
        note.className = 'mt-4 p-3 bg-blue-900/20 rounded-xl border border-blue-800/30';
        note.innerHTML = `
            <p class="text-xs text-blue-300 text-center">
                <i class="fas fa-map-marker-alt ml-1"></i>
                ${noteText}
            </p>
        `;
        list.appendChild(note);
        
        updateCurrentTimeDisplay();
    }

    function updateCurrentTimeDisplay() {
        const now = new Date();
        const kurdishMonths = ['Ú©Ø§Ù†ÙˆÙˆÙ†ÛŒ Ø¯ÙˆÙˆÛ•Ù…', 'Ø´ÙˆØ¨Ø§Øª', 'Ø¦Ø§Ø²Ø§Ø±', 'Ù†ÛŒØ³Ø§Ù†', 'Ø¦Ø§ÛŒØ§Ø±', 'Ø­ÙˆØ²Û•ÛŒØ±Ø§Ù†', 'ØªÛ•Ù…Ù…ÙˆØ²', 'Ø¦Ø§Ø¨', 'Ø¦Û•ÛŒÙ„ÙˆÙˆÙ„', 'ØªØ´Ø±ÛŒÙ†ÛŒ ÛŒÛ•Ú©Û•Ù…', 'ØªØ´Ø±ÛŒÙ†ÛŒ Ø¯ÙˆÙˆÛ•Ù…', 'Ú©Ø§Ù†ÙˆÙˆÙ†ÛŒ ÛŒÛ•Ú©Û•Ù…'];
        const kurdishDays = ['ÛŒÛ•Ú©Ø´Û•Ù…Ù…Û•', 'Ø¯ÙˆÙˆØ´Û•Ù…Ù…Û•', 'Ø³ÛØ´Û•Ù…Ù…Û•', 'Ú†ÙˆØ§Ø±Ø´Û•Ù…Ù…Û•', 'Ù¾ÛÙ†Ø¬Ø´Û•Ù…Ù…Û•', 'Ù‡Û•ÛŒÙ†ÛŒ', 'Ø´Û•Ù…Ù…Û•'];
        
        const time = now.toLocaleTimeString('en-US', {hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false});
        const date = `${kurdishDays[now.getDay()]}ØŒ ${now.getDate()} ${kurdishMonths[now.getMonth()]}`;
        
        const el = document.getElementById('currentTime');
        if(el) {
            el.innerHTML = `<div class="text-lg font-mono font-bold">${time}</div><div class="text-xs text-gray-400 mt-1">${date}</div>`;
        }
    }

    function updateStats() {
        document.getElementById('totalMosques').textContent = mosques.length;
        document.getElementById('activeFunerals').textContent = Object.keys(funerals).length;
        updateNearbyCount();
        updateTodayFuneralsList();
    }

    function updateNearbyCount() {
        if(!userPos) {
            document.getElementById('nearbyCount').textContent = '0';
            return;
        }
        const nearby = mosques.filter(m => map.distance(userPos, [m.lat, m.lng]) <= 2000);
        document.getElementById('nearbyCount').textContent = nearby.length;
    }

    function updateTodayFuneralsList() {
        const list = document.getElementById('todayFuneralsList');
        list.innerHTML = '';
        const count = Object.keys(funerals).length;
        if(count === 0) {
            list.innerHTML = '<p class="text-center text-gray-500 text-sm py-3">Ù‡ÛŒÚ† Ù¾Ø±Ø³Û•ÛŒÛ•Ú© Ù†ÛŒÛŒÛ•</p>';
            return;
        }
        Object.entries(funerals).forEach(([id, data]) => {
            const m = mosques.find(x => x.id == id);
            if(!m) return;
            const div = document.createElement('div');
            div.className = 'glass-light p-3 rounded-xl flex justify-between';
            div.innerHTML = `<div><p class="text-xs font-bold text-white">${m.name}</p><p class="text-xs text-gray-400">${data.name}</p></div><span class="text-xs text-blue-400 font-mono">${data.time}</span>`;
            list.appendChild(div);
        });
    }

    function updateHeaderBadge() {
        const count = Object.keys(funerals).length;
        const badge = document.getElementById('funeralBadge');
        if(count > 0) {
            badge.classList.remove('hidden');
            badge.classList.add('flex');
            document.getElementById('funeralCount').textContent = count + ' Ù¾Ø±Ø³Û•';
            document.getElementById('statsNotif').classList.remove('hidden');
        } else {
            badge.classList.add('hidden');
            document.getElementById('statsNotif').classList.add('hidden');
        }
    }

    function showAllMosques() {
        if(mosques.length === 0) return showToast('Ù‡ÛŒÚ† Ù…Ø²Ú¯Û•ÙˆØªÛÚ© Ù†ÛŒÛŒÛ•', 'error');
        const bounds = L.latLngBounds();
        mosques.forEach(m => bounds.extend([m.lat, m.lng]));
        map.fitBounds(bounds, {padding: [50, 50]});
        showToast(`${mosques.length} Ù…Ø²Ú¯Û•ÙˆØª`);
    }

    function showAdminTab(tab) {
        const ff = document.getElementById('funeralForm');
        const mf = document.getElementById('mosqueForm');
        const tf = document.getElementById('tabFuneral');
        const tm = document.getElementById('tabMosque');
        
        if(tab === 'funeral') {
            ff.classList.remove('hidden');
            mf.classList.add('hidden');
            tf.className = 'flex-1 py-3 rounded-xl bg-red-600 font-bold text-sm';
            tm.className = 'flex-1 py-3 rounded-xl text-gray-400 font-bold text-sm';
        } else {
            ff.classList.add('hidden');
            mf.classList.remove('hidden');
            tf.className = 'flex-1 py-3 rounded-xl text-gray-400 font-bold text-sm';
            tm.className = 'flex-1 py-3 rounded-xl bg-green-600 font-bold text-sm';
        }
    }

    function submitFuneral() {
        const pass = document.getElementById('adminPass').value;
        if(pass !== '2026') return showToast('Ú©Û†Ø¯ÛŒ Ø¦Û•Ø¯Ù…ÛŒÙ† Ù‡Û•ÚµÛ•ÛŒÛ•', 'error');
        
        if(!db) return showToast('Ø¦ÛŒÙ†ØªÛ•Ø±Ù†ÛØª Ù†ÛŒÛŒÛ•', 'error');
        const mid = document.getElementById('mosqueSelect').value;
        const name = document.getElementById('deceasedName').value.trim();
        const time = document.getElementById('prayerTime').value;
        if(!mid || !name || !time) return showToast('Ù¾Ú•Ø¨Ú©Û•Ø±Û•ÙˆÛ•', 'error');
        
        db.ref('funerals/' + mid).set({name, time, timestamp: Date.now()});
        document.getElementById('deceasedName').value = '';
        document.getElementById('prayerTime').value = '';
        showToast('Ø¨ÚµØ§ÙˆÚ©Ø±Ø§ÛŒÛ•ÙˆÛ•');
    }

    function submitMosque() {
        const pass = document.getElementById('adminPass').value;
        if(pass !== '2026') return showToast('Ú©Û†Ø¯ÛŒ Ø¦Û•Ø¯Ù…ÛŒÙ† Ù‡Û•ÚµÛ•ÛŒÛ•', 'error');
        
        if(!db) return showToast('Ø¦ÛŒÙ†ØªÛ•Ø±Ù†ÛØª Ù†ÛŒÛŒÛ•', 'error');
        const name = document.getElementById('mosqueName').value.trim();
        const lat = parseFloat(document.getElementById('mosqueLat').value);
        const lng = parseFloat(document.getElementById('mosqueLng').value);
        if(!name || isNaN(lat) || isNaN(lng)) return showToast('Ù¾Ú•Ø¨Ú©Û•Ø±Û•ÙˆÛ•', 'error');
        
        const ref = db.ref('customMosques').push();
        ref.set({id: ref.key, name, lat, lng});
        document.getElementById('mosqueName').value = '';
        document.getElementById('mosqueLat').value = '';
        document.getElementById('mosqueLng').value = '';
        showToast('Ø²ÛŒØ§Ø¯Ú©Ø±Ø§');
    }

    function useCurrentLocation() {
        if(!userPos) return showToast('Ø´ÙˆÛÙ† Ù†Û•Ø¯Û†Ø²Ø±Ø§ÛŒÛ•ÙˆÛ•', 'error');
        document.getElementById('mosqueLat').value = userPos.lat.toFixed(6);
        document.getElementById('mosqueLng').value = userPos.lng.toFixed(6);
        showToast('Ø¨Û•Ú©Ø§Ø±Ù‡ÛÙ†Ø±Ø§');
    }

    function updateAdminSelect() {
        const s = document.getElementById('mosqueSelect');
        s.innerHTML = '<option value="">Ù‡Û•ÚµØ¨Ú˜ÛØ±Û•</option>' + mosques.map(m => `<option value="${m.id}">${m.name}</option>`).join('');
    }

    function updateAdminFuneralList() {
        const list = document.getElementById('adminFuneralList');
        list.innerHTML = '';
        const count = Object.keys(funerals).length;
        if(count === 0) {
            list.innerHTML = '<div class="text-center text-gray-500 text-xs py-4">Ù‡ÛŒÚ† Ù†ÛŒÛŒÛ•</div>';
            return;
        }
        Object.entries(funerals).forEach(([id, data]) => {
            const m = mosques.find(x => x.id == id);
            if(!m) return;
            const div = document.createElement('div');
            div.className = 'glass-light p-3 rounded-xl flex justify-between border-r-4 border-red-500/30 mb-2';
            div.innerHTML = `<div><p class="text-xs font-bold">${m.name}</p><p class="text-xs text-gray-400">${data.name} - ${data.time}</p></div><button onclick="deleteFuneral('${id}')" class="bg-red-500/20 px-3 py-1 rounded-lg text-red-400 text-xs"><i class="fas fa-trash"></i></button>`;
            list.appendChild(div);
        });
    }

    function deleteFuneral(id) {
        if(!confirm('Ø¯ÚµÙ†ÛŒØ§ÛŒØŸ')) return;
        if(db) {
            db.ref('funerals/' + id).remove();
            showToast('Ø³Ú•Ø§ÛŒÛ•ÙˆÛ•');
        }
    }

    function autoDeleteOldFunerals() {
        if(!db) return;
        db.ref('funerals').once('value', (s) => {
            const d = s.val();
            if(!d) return;
            const now = Date.now();
            Object.entries(d).forEach(([id, f]) => {
                if(now - f.timestamp > 86400000) db.ref('funerals/' + id).remove();
            });
        });
    }

    function locateUser() {
        map.locate({setView: true, maxZoom: 16});
        showToast('Ú¯Û•Ú•Ø§Ù†...');
    }

    function shareLocation() {
        if(!selectedMosque) return showToast('Ù‡Û•ÚµØ¨Ú˜ÛØ±Û•', 'error');
        const url = `https://www.google.com/maps/search/?api=1&query=${selectedMosque.lat},${selectedMosque.lng}`;
        if(navigator.share) {
            navigator.share({title: selectedMosque.name, url});
        } else {
            navigator.clipboard.writeText(url);
            showToast('Ú©Û†Ù¾ÛŒ Ú©Ø±Ø§');
        }
    }

    function shareApp() {
        const url = window.location.href;
        if(navigator.share) {
            navigator.share({title: 'Hajiawa Map', url});
        } else {
            navigator.clipboard.writeText(url);
            showToast('Ú©Û†Ù¾ÛŒ Ú©Ø±Ø§');
        }
    }

    function toggleModal(id) {
        const m = document.getElementById(id);
        if(m.style.display === 'flex') {
            m.style.display = 'none';
        } else {
            m.style.display = 'flex';
            if(id === 'adminModal') {
                updateAdminSelect();
                updateAdminFuneralList();
            }
        }
    }

    function showToast(msg, type='success') {
        const t = document.getElementById('toastNotif');
        const i = document.getElementById('toastIcon');
        const m = document.getElementById('toastMessage');
        
        i.className = type === 'error' ? 'fas fa-exclamation-circle text-red-400 text-xl' : 'fas fa-check-circle text-green-400 text-xl';
        m.textContent = msg;
        t.classList.add('show');
        setTimeout(() => t.classList.remove('show'), 3000);
    }

    // Ø¨Û†ØªÛŒ Ø¦Û•Ø¯Ù…ÛŒÙ†
    function adminBotDeleteAllFunerals() {
        const pass = document.getElementById('adminPass').value;
        if(pass !== '2026') return showToast('Ú©Û†Ø¯ÛŒ Ø¦Û•Ø¯Ù…ÛŒÙ† Ù‡Û•ÚµÛ•ÛŒÛ•', 'error');
        
        if(!confirm('Ø¯ÚµÙ†ÛŒØ§ÛŒ Ù„Û• Ø³Ú•ÛŒÙ†Û•ÙˆÛ•ÛŒ Ù‡Û•Ù…ÙˆÙˆ Ù¾Ø±Ø³Û•Ú©Ø§Ù†ØŸ')) return;
        
        if(db) {
            db.ref('funerals').remove()
                .then(() => {
                    showToast('Ù‡Û•Ù…ÙˆÙˆ Ù¾Ø±Ø³Û•Ú©Ø§Ù† Ø³Ú•Ø¯Ø±Ø§ÛŒÛ•ÙˆÛ•');
                    document.getElementById('adminFuneralList').innerHTML = '<div class="text-center text-gray-500 text-xs py-4">Ù‡ÛŒÚ† Ù¾Ø±Ø³Û•ÛŒÛ•Ú© Ù†ÛŒÛŒÛ•</div>';
                })
                .catch(err => showToast('Ù‡Û•ÚµÛ•: ' + err.message, 'error'));
        }
    }

    function adminBotAddSampleFunerals() {
        const pass = document.getElementById('adminPass').value;
        if(pass !== '2026') return showToast('Ú©Û†Ø¯ÛŒ Ø¦Û•Ø¯Ù…ÛŒÙ† Ù‡Û•ÚµÛ•ÛŒÛ•', 'error');
        
        if(!db) return showToast('Ø¦ÛŒÙ†ØªÛ•Ø±Ù†ÛØª Ù†ÛŒÛŒÛ•', 'error');
        
        const sampleFunerals = [
            {mosqueId: 'm1', name: 'Ø­Ø§Ø¬ÛŒ Ù…Ø³ØªÛ•ÙØ§ Ø¹Û•Ù„ÛŒ', time: '14:30'},
            {mosqueId: 'm2', name: 'Ø´Û•Ù‡ÛŒØ¯ Ø¦Û•Ø­Ù…Û•Ø¯ Ù…Ø­Û•Ù…Ù…Û•Ø¯', time: '15:00'},
            {mosqueId: 'm3', name: 'Ø®Ø§ØªÙˆÙˆ Ú©Û•Ù…Ø§Ù„Û• Ø¹Û•Ø¨Ø¯ÙˆÚµÚµØ§', time: '16:15'}
        ];
        
        sampleFunerals.forEach(f => {
            db.ref('funerals/' + f.mosqueId).set({
                name: f.name,
                time: f.time,
                timestamp: Date.now(),
                addedBy: 'bot'
            });
        });
        
        showToast('Ù£ Ù¾Ø±Ø³Û•ÛŒ Ù†Ù…ÙˆÙˆÙ†Û•ÛŒÛŒ Ø²ÛŒØ§Ø¯Ú©Ø±Ø§');
    }

    function adminBotResetMosques() {
        const pass = document.getElementById('adminPass').value;
        if(pass !== '2026') return showToast('Ú©Û†Ø¯ÛŒ Ø¦Û•Ø¯Ù…ÛŒÙ† Ù‡Û•ÚµÛ•ÛŒÛ•', 'error');
        
        // Ù…Ø²Ú¯Û•ÙˆØªÛ• Ú•Ø§Ø³ØªÛ•Ù‚ÛŒÙ†Û•Ú©Ø§Ù†ÛŒ Ø­Ø§Ø¬ÛŒØ§ÙˆØ§ - ÙˆÛ•Ú© Ú©Û†Ø¯ÛŒ Ø³Û•Ø±Û•ØªØ§ÛŒÛŒ ØªÛ†
        const hajiawaMosques = [
            {id: "m1", name: "Ù…Ø²Ú¯Û•ÙˆØªÛŒ Ú¯Û•ÙˆØ±Û•ÛŒ Ø­Ø§Ø¬ÛŒØ§ÙˆØ§", lat: 36.2369, lng: 44.7869, description: "Ù…Ø²Ú¯Û•ÙˆØªÛŒ Ú¯Û•ÙˆØ±Û•ÛŒ Ø´Ø§Ø±"},
            {id: "m2", name: "Ù…Ø²Ú¯Û•ÙˆØªÛŒ Ø´Û•Ú¾ÛŒØ¯Ø§Ù†", lat: 36.2355, lng: 44.7885},
            {id: "m3", name: "Ù…Ø²Ú¯Û•ÙˆØªÛŒ Ø¯Ø§Ø¨Ø§Ù†", lat: 36.2340, lng: 44.7890},
            {id: "m4", name: "Ù…Ø²Ú¯Û•ÙˆØªÛŒ Ù…Ø§Ú©Û†Ú©", lat: 36.2335, lng: 44.7875},
            {id: "m5", name: "Ù…Ø²Ú¯Û•ÙˆØªÛŒ Ù‚Û•Ù„Ø§ÙˆÛ•ÛŒÛŒØ§Ù†", lat: 36.2320, lng: 44.7860},
            {id: "m12", name: "Ù…Ø²Ú¯Û•ÙˆØªÛŒ Ø´Ø§ÙØ¹ÛŒ Ú¯Û•ÙˆØ±Û•", lat: 36.2410, lng: 44.7880},
            {id: "m21", name: "Ù…Ø²Ú¯Û•ÙˆØªÛŒ Ù†ÙˆØ±", lat: 36.2390, lng: 44.7820},
            {id: "m31", name: "Ù…Ø²Ú¯Û•ÙˆØªÛŒ Ø³Û•Ù„Ø§Ø­Û•Ø¯ÛŒÙ†", lat: 36.2340, lng: 44.7850}
        ];
        
        if(db) {
            // ØªÛ•Ù†Ù‡Ø§ Ù…Ø²Ú¯Û•ÙˆØªÛ• Ú•Ø§Ø³ØªÛ•Ù‚ÛŒÙ†Û•Ú©Ø§Ù† Ø¯Ø§Ø¯Û•Ù…Û•Ø²Ø±ÛÙ†ÛŒÙ†
            const customRef = db.ref('customMosques');
            customRef.remove(); // Ø³Ú•ÛŒÙ†Û•ÙˆÛ•ÛŒ Ú©Û†Ù†Û•Ú©Ø§Ù†
            
            // Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ Ù†ÙˆÛÛŒÛ•Ú©Ø§Ù†
            hajiawaMosques.forEach(mosque => {
                const newRef = customRef.push();
                newRef.set({
                    id: newRef.key,
                    name: mosque.name,
                    lat: mosque.lat,
                    lng: mosque.lng,
                    description: mosque.description || "",
                    isHajiawa: true
                });
            });
            
            showToast('Ù…Ø²Ú¯Û•ÙˆØªÛ•Ú©Ø§Ù†ÛŒ Ø­Ø§Ø¬ÛŒØ§ÙˆØ§ Ú•ÛÚ©Ø®Ø±Ø§ÛŒÛ•ÙˆÛ•');
        } else {
            // Ù„Û• Ø¦Û†ÙÙ„Ø§ÛŒÙ†
            mosques = hajiawaMosques;
            renderMarkers();
            showToast('Ù…Ø²Ú¯Û•ÙˆØªÛ•Ú©Ø§Ù† Ú•ÛÚ©Ø®Ø±Ø§Ù† (Ø¦Û†ÙÙ„Ø§ÛŒÙ†)');
        }
    }

    function adminBotExportData() {
        const pass = document.getElementById('adminPass').value;
        if(pass !== '2026') return showToast('Ú©Û†Ø¯ÛŒ Ø¦Û•Ø¯Ù…ÛŒÙ† Ù‡Û•ÚµÛ•ÛŒÛ•', 'error');
        
        const data = {
            mosques: mosques,
            funerals: funerals,
            timestamp: new Date().toLocaleString('ku-IQ'),
            totalMosques: mosques.length,
            totalFunerals: Object.keys(funerals).length
        };
        
        const dataStr = JSON.stringify(data, null, 2);
        const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
        
        const exportFileDefaultName = `hajiawa_data_${new Date().toISOString().split('T')[0]}.json`;
        
        const linkElement = document.createElement('a');
        linkElement.setAttribute('href', dataUri);
        linkElement.setAttribute('download', exportFileDefaultName);
        linkElement.click();
        
        showToast('Ø¯Ø§ØªØ§ Ù‡Û•Ù†Ø§Ø±Ø¯Û•Ú©Ø±Ø§');
    }
</script>

